{"ast":null,"code":"import React,{useState,useContext,useEffect}from'react';import{AuthContext}from'../context/AuthContext';import{useNavigate,useParams}from'react-router-dom';import{apiRequest}from'../utils/api';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function CreateEditPost(){const{token}=useContext(AuthContext);const navigate=useNavigate();const{id}=useParams();const isEdit=Boolean(id);const[title,setTitle]=useState('');const[imageURL,setImageURL]=useState('');const[content,setContent]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[useAI,setUseAI]=useState(false);useEffect(()=>{if(isEdit){apiRequest(\"/api/posts/\".concat(id)).then(post=>{setTitle(post.title);setImageURL(post.imageURL||'');setContent(post.content);}).catch(()=>navigate('/'));}},[id,isEdit,navigate]);const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);if(title.length<5||title.length>120){setError('Title must be 5-120 characters.');setLoading(false);return;}if(!useAI&&content.length<50){setError('Content must be at least 50 characters.');setLoading(false);return;}try{if(isEdit){await apiRequest(\"/api/posts/\".concat(id),'PUT',{title,imageURL,content},token);}else{await apiRequest('/api/posts','POST',{title,imageURL,content,useAI},token);}navigate('/profile');}catch(err){setError(err.message||'Error saving post');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4 max-w-xl\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold mb-4\",children:[isEdit?'Edit':'Create',\" Post\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"grid gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:title,onChange:e=>setTitle(e.target.value),className:\"border p-2\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"Image URL (optional)\",value:imageURL,onChange:e=>setImageURL(e.target.value),className:\"border p-2\"}),!isEdit&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"useAI\",checked:useAI,onChange:e=>setUseAI(e.target.checked),className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"useAI\",children:\"Use AI to generate content\"})]}),!useAI&&/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Content\",value:content,onChange:e=>setContent(e.target.value),className:\"border p-2 h-40\",required:!useAI}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"\".concat(loading?'bg-gray-500':'bg-blue-500',\" text-white px-4 py-2 rounded flex items-center justify-center\"),disabled:loading,children:loading?/*#__PURE__*/_jsx(\"span\",{children:\"Generating...\"}):/*#__PURE__*/_jsxs(\"span\",{children:[isEdit?'Update':'Create',\" Post\"]})})]})]});}export default CreateEditPost;","map":{"version":3,"names":["React","useState","useContext","useEffect","AuthContext","useNavigate","useParams","apiRequest","jsxs","_jsxs","jsx","_jsx","CreateEditPost","token","navigate","id","isEdit","Boolean","title","setTitle","imageURL","setImageURL","content","setContent","error","setError","loading","setLoading","useAI","setUseAI","concat","then","post","catch","handleSubmit","e","preventDefault","length","err","message","className","children","onSubmit","type","placeholder","value","onChange","target","required","checked","htmlFor","disabled"],"sources":["C:/Users/ayush/OneDrive/Desktop/python practice/blog-app/client/src/pages/CreateEditPost.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { apiRequest } from '../utils/api';\r\n\r\nfunction CreateEditPost() {\r\n  const { token } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const isEdit = Boolean(id);\r\n  const [title, setTitle] = useState('');\r\n  const [imageURL, setImageURL] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [useAI, setUseAI] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isEdit) {\r\n      apiRequest(`/api/posts/${id}`)\r\n        .then(post => {\r\n          setTitle(post.title);\r\n          setImageURL(post.imageURL || '');\r\n          setContent(post.content);\r\n        })\r\n        .catch(() => navigate('/'));\r\n    }\r\n  }, [id, isEdit, navigate]);\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n    \r\n    if (title.length < 5 || title.length > 120) {\r\n      setError('Title must be 5-120 characters.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    if (!useAI && content.length < 50) {\r\n      setError('Content must be at least 50 characters.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    try {\r\n      if (isEdit) {\r\n        await apiRequest(`/api/posts/${id}`, 'PUT', { title, imageURL, content }, token);\r\n      } else {\r\n        await apiRequest('/api/posts', 'POST', { title, imageURL, content, useAI }, token);\r\n      }\r\n      navigate('/profile');\r\n    } catch (err) {\r\n      setError(err.message || 'Error saving post');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 max-w-xl\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">{isEdit ? 'Edit' : 'Create'} Post</h1>\r\n      <form onSubmit={handleSubmit} className=\"grid gap-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Title\"\r\n          value={title}\r\n          onChange={e => setTitle(e.target.value)}\r\n          className=\"border p-2\"\r\n          required\r\n        />\r\n        <input\r\n          type=\"url\"\r\n          placeholder=\"Image URL (optional)\"\r\n          value={imageURL}\r\n          onChange={e => setImageURL(e.target.value)}\r\n          className=\"border p-2\"\r\n        />\r\n        {!isEdit && (\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"useAI\"\r\n              checked={useAI}\r\n              onChange={e => setUseAI(e.target.checked)}\r\n              className=\"h-4 w-4\"\r\n            />\r\n            <label htmlFor=\"useAI\">Use AI to generate content</label>\r\n          </div>\r\n        )}\r\n        {!useAI && (\r\n          <textarea\r\n            placeholder=\"Content\"\r\n            value={content}\r\n            onChange={e => setContent(e.target.value)}\r\n            className=\"border p-2 h-40\"\r\n            required={!useAI}\r\n          />\r\n        )}\r\n        {error && <p className=\"text-red-500\">{error}</p>}\r\n        <button \r\n          type=\"submit\" \r\n          className={`${loading ? 'bg-gray-500' : 'bg-blue-500'} text-white px-4 py-2 rounded flex items-center justify-center`}\r\n          disabled={loading}\r\n        >\r\n          {loading ? (\r\n            <span>Generating...</span>\r\n          ) : (\r\n            <span>{isEdit ? 'Update' : 'Create'} Post</span>\r\n          )}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateEditPost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}