{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../context/AuthContext';import{apiRequest}from'../utils/api';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const{user,token,logout}=useContext(AuthContext);const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{if(!user){navigate('/login');return;}apiRequest(\"/api/posts?username=\".concat(user.username)).then(data=>setPosts(data.posts)).catch(()=>setPosts([])).finally(()=>setLoading(false));},[user,navigate]);const handleDelete=async id=>{if(!window.confirm('Are you sure you want to delete this post?'))return;try{await apiRequest(\"/api/posts/\".concat(id),'DELETE',null,token);setPosts(posts.filter(p=>p._id!==id));}catch(err){setError(err.message||'Delete failed');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"My Posts\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"mb-4 bg-gray-200 px-3 py-1 rounded\",children:\"Logout\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):posts.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No posts found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"border p-4 rounded\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold text-lg\",children:post.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(post._id),className:\"bg-blue-500 text-white px-2 py-1 rounded\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(post._id),className:\"bg-red-500 text-white px-2 py-1 rounded\",children:\"Delete\"})]})]},post._id))}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mt-4\",children:error})]});}export default Profile;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","apiRequest","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Profile","user","token","logout","posts","setPosts","loading","setLoading","error","setError","navigate","concat","username","then","data","catch","finally","handleDelete","id","window","confirm","filter","p","_id","err","message","className","children","onClick","length","map","post","title","to"],"sources":["C:/Users/ayush/OneDrive/Desktop/python practice/blog-app/client/src/pages/Profile.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { apiRequest } from '../utils/api';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\nfunction Profile() {\r\n  const { user, token, logout } = useContext(AuthContext);\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    apiRequest(`/api/posts?username=${user.username}`)\r\n      .then(data => setPosts(data.posts))\r\n      .catch(() => setPosts([]))\r\n      .finally(() => setLoading(false));\r\n  }, [user, navigate]);\r\n\r\n  const handleDelete = async id => {\r\n    if (!window.confirm('Are you sure you want to delete this post?')) return;\r\n    try {\r\n      await apiRequest(`/api/posts/${id}`, 'DELETE', null, token);\r\n      setPosts(posts.filter(p => p._id !== id));\r\n    } catch (err) {\r\n      setError(err.message || 'Delete failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">My Posts</h1>\r\n      <button onClick={logout} className=\"mb-4 bg-gray-200 px-3 py-1 rounded\">Logout</button>\r\n      {loading ? <p>Loading...</p> : posts.length === 0 ? <p>No posts found.</p> : (\r\n        <div className=\"grid gap-4\">\r\n          {posts.map(post => (\r\n            <div key={post._id} className=\"border p-4 rounded\">\r\n              <h2 className=\"font-semibold text-lg\">{post.title}</h2>\r\n              <div className=\"flex gap-2 mt-2\">\r\n                <Link to={`/edit/${post._id}`} className=\"bg-blue-500 text-white px-2 py-1 rounded\">Edit</Link>\r\n                <button onClick={() => handleDelete(post._id)} className=\"bg-red-500 text-white px-2 py-1 rounded\">Delete</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {error && <p className=\"text-red-500 mt-4\">{error}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}