{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ayush\\\\OneDrive\\\\Desktop\\\\python practice\\\\blog-app\\\\client\\\\src\\\\pages\\\\CreateEditPost.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { apiRequest } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CreateEditPost() {\n  _s();\n  const {\n    token\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  const isEdit = Boolean(id);\n  const [title, setTitle] = useState('');\n  const [imageURL, setImageURL] = useState('');\n  const [content, setContent] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [useAI, setUseAI] = useState(false);\n  useEffect(() => {\n    if (isEdit) {\n      apiRequest(`/api/posts/${id}`).then(post => {\n        setTitle(post.title);\n        setImageURL(post.imageURL || '');\n        setContent(post.content);\n      }).catch(() => navigate('/'));\n    }\n  }, [id, isEdit, navigate]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    if (title.length < 5 || title.length > 120) {\n      setError('Title must be 5-120 characters.');\n      setLoading(false);\n      return;\n    }\n    if (!useAI && content.length < 50) {\n      setError('Content must be at least 50 characters.');\n      setLoading(false);\n      return;\n    }\n    try {\n      if (isEdit) {\n        await apiRequest(`/api/posts/${id}`, 'PUT', {\n          title,\n          imageURL,\n          content\n        }, token);\n      } else {\n        await apiRequest('/api/posts', 'POST', {\n          title,\n          imageURL,\n          content,\n          useAI\n        }, token);\n      }\n      navigate('/profile');\n    } catch (err) {\n      setError(err.message || 'Error saving post');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4 max-w-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: [isEdit ? 'Edit' : 'Create', \" Post\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"grid gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Title\",\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        className: \"border p-2\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"url\",\n        placeholder: \"Image URL (optional)\",\n        value: imageURL,\n        onChange: e => setImageURL(e.target.value),\n        className: \"border p-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), !isEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"useAI\",\n          checked: useAI,\n          onChange: e => setUseAI(e.target.checked),\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"useAI\",\n          children: \"Use AI to generate content\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), !useAI && /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Content\",\n        value: content,\n        onChange: e => setContent(e.target.value),\n        className: \"border p-2 h-40\",\n        required: !useAI\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: `${loading ? 'bg-gray-500' : 'bg-blue-500'} text-white px-4 py-2 rounded flex items-center justify-center`,\n        disabled: loading,\n        children: loading ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Generating...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [isEdit ? 'Update' : 'Create', \" Post\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(CreateEditPost, \"kFn4GIRSv0sEmqyo3simBPnDkhg=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = CreateEditPost;\nexport default CreateEditPost;\nvar _c;\n$RefreshReg$(_c, \"CreateEditPost\");","map":{"version":3,"names":["React","useState","useContext","useEffect","AuthContext","useNavigate","useParams","apiRequest","jsxDEV","_jsxDEV","CreateEditPost","_s","token","navigate","id","isEdit","Boolean","title","setTitle","imageURL","setImageURL","content","setContent","error","setError","loading","setLoading","useAI","setUseAI","then","post","catch","handleSubmit","e","preventDefault","length","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","checked","htmlFor","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ayush/OneDrive/Desktop/python practice/blog-app/client/src/pages/CreateEditPost.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { apiRequest } from '../utils/api';\r\n\r\nfunction CreateEditPost() {\r\n  const { token } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const isEdit = Boolean(id);\r\n  const [title, setTitle] = useState('');\r\n  const [imageURL, setImageURL] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [useAI, setUseAI] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isEdit) {\r\n      apiRequest(`/api/posts/${id}`)\r\n        .then(post => {\r\n          setTitle(post.title);\r\n          setImageURL(post.imageURL || '');\r\n          setContent(post.content);\r\n        })\r\n        .catch(() => navigate('/'));\r\n    }\r\n  }, [id, isEdit, navigate]);\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n    \r\n    if (title.length < 5 || title.length > 120) {\r\n      setError('Title must be 5-120 characters.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    if (!useAI && content.length < 50) {\r\n      setError('Content must be at least 50 characters.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    try {\r\n      if (isEdit) {\r\n        await apiRequest(`/api/posts/${id}`, 'PUT', { title, imageURL, content }, token);\r\n      } else {\r\n        await apiRequest('/api/posts', 'POST', { title, imageURL, content, useAI }, token);\r\n      }\r\n      navigate('/profile');\r\n    } catch (err) {\r\n      setError(err.message || 'Error saving post');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4 max-w-xl\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">{isEdit ? 'Edit' : 'Create'} Post</h1>\r\n      <form onSubmit={handleSubmit} className=\"grid gap-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Title\"\r\n          value={title}\r\n          onChange={e => setTitle(e.target.value)}\r\n          className=\"border p-2\"\r\n          required\r\n        />\r\n        <input\r\n          type=\"url\"\r\n          placeholder=\"Image URL (optional)\"\r\n          value={imageURL}\r\n          onChange={e => setImageURL(e.target.value)}\r\n          className=\"border p-2\"\r\n        />\r\n        {!isEdit && (\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"useAI\"\r\n              checked={useAI}\r\n              onChange={e => setUseAI(e.target.checked)}\r\n              className=\"h-4 w-4\"\r\n            />\r\n            <label htmlFor=\"useAI\">Use AI to generate content</label>\r\n          </div>\r\n        )}\r\n        {!useAI && (\r\n          <textarea\r\n            placeholder=\"Content\"\r\n            value={content}\r\n            onChange={e => setContent(e.target.value)}\r\n            className=\"border p-2 h-40\"\r\n            required={!useAI}\r\n          />\r\n        )}\r\n        {error && <p className=\"text-red-500\">{error}</p>}\r\n        <button \r\n          type=\"submit\" \r\n          className={`${loading ? 'bg-gray-500' : 'bg-blue-500'} text-white px-4 py-2 rounded flex items-center justify-center`}\r\n          disabled={loading}\r\n        >\r\n          {loading ? (\r\n            <span>Generating...</span>\r\n          ) : (\r\n            <span>{isEdit ? 'Update' : 'Create'} Post</span>\r\n          )}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateEditPost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}